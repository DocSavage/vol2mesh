package:
    name: vol2mesh

  # Automatically determine the version from the last git tag
  {% if GIT_DESCRIBE_NUMBER|int == 0 %}
    version: "{{GIT_DESCRIBE_TAG}}"
  {% else %}
    # If we're using a non-tagged revision, append '.postN' to the version
    version: "{{GIT_DESCRIBE_TAG}}.post{{GIT_DESCRIBE_NUMBER}}"
  {% endif %}

source:
  path: ..

build:
  number: 0
  string: {{PKG_BUILDNUM}}_py{{CONDA_PY}}_g{{GIT_FULL_HASH[:7]}}
  script: python setup.py install --single-version-externally-managed --record record.txt
  noarch: python
  
requirements:
  build:
    - python {{ python }}
    - setuptools

  run:
    - python {{ python }}
    - scikit-image >=0.13
    - marching_cubes
    - fq-mesh-simplification
    - numpy
    - numba
    - pandas
    - dvidutils >=0.0.post81
    - lz4 >=2,<3

test:
  imports:
    - vol2mesh

  requires:
    - pytest
    - scipy
    
  commands:
    - pytest -s --tb=native --pyargs vol2mesh.tests
    
about:
  home: https://github.com/mmorehea/vol2mesh
  license: Unknown
  summary: Tools for converting image volumes to meshes
